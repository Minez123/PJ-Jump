[gd_scene load_steps=6 format=3 uid="uid://budo6ml1l5gc1"]

[ext_resource type="Resource" uid="uid://bi7exvfig617x" path="res://items/Ice_boot.tres" id="1_e3bo5"]
[ext_resource type="AudioStream" uid="uid://bqoqxl7cxo5xf" path="res://knife_sfx-2.mp3" id="2_ebjmj"]
[ext_resource type="PackedScene" uid="uid://b4twotxglb8c1" path="res://ice_boots.tscn" id="3_ebjmj"]

[sub_resource type="GDScript" id="GDScript_1xfmm"]
script/source = "extends Area3D


@export var spin_speed: float = 90.0  # degrees per second
@export var uid: String = \"Ice_boot\"
@export var item_resource: ItemResource
func _process(delta: float) -> void:
	rotate_y(deg_to_rad(spin_speed * delta))
func _ready():
	add_to_group(\"items\")
	connect(\"body_entered\", _on_body_entered)

@onready var item_sfx: AudioStreamPlayer3D = $collect_sfx

func _on_body_entered(body: Node) -> void:
	if body.is_in_group(\"player\"):
		var inventory = get_tree().get_first_node_in_group(\"inventory_ui\")
		if inventory:
			item_sfx.play()
			# Pass the ItemResource object directly to the inventory
			inventory.add_item(item_resource)
		
		var popup = get_tree().get_first_node_in_group(\"item_popup\")
		if popup:
			popup.show_item(item_resource,3)
		
		# Separate SFX and `queue_free()` call for better control
		item_sfx.play()
		await get_tree().create_timer(0.2).timeout
		queue_free()
		queue_free()
"

[sub_resource type="SphereShape3D" id="SphereShape3D_qs0bq"]

[node name="Ice_boot" type="Area3D"]
script = SubResource("GDScript_1xfmm")
item_resource = ExtResource("1_e3bo5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("SphereShape3D_qs0bq")

[node name="collect_sfx" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("2_ebjmj")

[node name="Boots2" parent="." instance=ExtResource("3_ebjmj")]
